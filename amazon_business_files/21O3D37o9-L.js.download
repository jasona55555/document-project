(function(l){var d=window.AmazonUIPageJS||window.P,m=d._namespace||d.attributeErrors,f=m?m("CSHelpSearchAutocompleteJS"):d;f.guardFatal?f.guardFatal(l)(f,window):f.execute(function(){l(f,window)})})(function(l,d,m){l.when("jQuery").register("cs-retail-help-autocomplete",function(f){Function.prototype._bind=function(e){var d=this;return function(){for(var f=[this],n=0,c=arguments.length;n<c;n++)f.push(arguments[n]);return d.apply(e,f)}};return{searchSuggest:function(e,l,m,n){this.searchFormName=e.attr("id");
this.formElement=e.get(0);this.searchBox=e.find("#"+l).get(0);this.hiddenInput=e.find("#"+m).get(0);this.submitButton=e.find("#"+n).get(0);var c=-1,p=[],g=0,h="",q=null,r=null,t=null,u=!1,w=!1,v=e.find("#help_srch_sggst").get(0),x=e.find('[name\x3d"locale"]').val();this.init=function(){w||(u=-1!==navigator.userAgent.toLowerCase().indexOf("msie"),this.searchBox&&(h=this.searchBox.value,this.searchBox.setAttribute("autocomplete","off"),this.attachEventListener(this.searchBox,"keydown",this.onKeyDownEvent),
this.attachEventListener(this.searchBox,"keyup",this.onKeyUpEvent),this.attachEventListener(this.searchBox,"keypress",this.onKeyPressedEvent),this.attachEventListener(this.searchBox,"blur",this.onFocusLost),t=d.onresize,this.attachEventListener(d,"resize",this.onWindowResized),w=!0))};this.onKeyDownEvent=function(a,b){switch(b.keyCode){case 40:this.moveDown();this.stopEvent(b);break;case 38:this.moveUp(),this.stopEvent(b)}}._bind(this);this.onKeyUpEvent=function(a,b){switch(b.keyCode){case 13:this.HideSuggestionsDiv();
break;case 40:break;case 38:break;case 37:break;case 39:break;default:a=this.searchBox.value,a!==h&&(h=a,this.setSearchSuggestionTimeout())}}._bind(this);this.onKeyPressedEvent=function(a){if(27===a.keyCode&&"none"!==this.getSearchSuggest().style.display)return this.setSuggestionHideTimeout(),this.searchBox.value=h,!1}._bind(this);this.onFocusLost=function(a){this.setSuggestionHideTimeout()}._bind(this);this.onWindowResized=function(a){this.getSearchSuggest().style.width=this.searchBox.offsetWidth;
t&&t(a)}._bind(this);this.moveDown=function(){if(!(0>=g))try{this.unhighlightCurrentSuggestion(),c>=g-1?c=-1:++c,this.highlightCurrentSuggestion(!0)}catch(a){}};this.moveUp=function(){if(!(0>=g))try{this.unhighlightCurrentSuggestion(),0>c?c=g-1:--c,this.highlightCurrentSuggestion(!0)}catch(a){}};this.stopEvent=function(a){u?a.cancelBubble=!0:a.preventDefault()};this.displaySuggestions=function(){try{g=Math.min(7,p.length)}catch(c){g=0}var a=this.getSearchSuggest();f(a).width(f(this.searchBox).parent().width());
a.style.position="absolute";a.style.zIndex="130";a.innerHTML="";0<g?a.style.display="":this.HideSuggestionsDiv();for(var b,k=0;k<g;++k)b="issDiv"+k,b='\x3cdiv id\x3d"'+b+'"',b+='class\x3d"suggest_link"\x3e'+this.getFormattedSuggestionLine(p[k])+"\x3c/div\x3e",a.innerHTML+=b;0<g&&(a.innerHTML+='\x3cdiv id\x3d"issdivhdr" align\x3d"right"\x3e\x26nbsp;\x3c/div\x3e');for(k=0;k<g;++k)b="issDiv"+k,this.attachEventListener(e.find("#"+b).get(0),"mouseover",this.suggestOver),this.attachEventListener(e.find("#"+
b).get(0),"mouseout",this.suggestOut),this.attachEventListener(e.find("#"+b).get(0),"click",this.setSearchByIndex)};this.setSearchByIndex=function(a){c=(a.id?a:d.event.srcElement).id.substr(6);this.highlightCurrentSuggestion(!0);this.getSearchSuggest().innerHTML="";this.formElement.submit()}._bind(this);this.suggestOver=function(a,b){a.style||(a=d.event.srcElement?d.event.srcElement:d.event.originalTarget);a.style.cursor="default";this.unhighlightCurrentSuggestion();c=a.id.substr(6);this.highlightCurrentSuggestion(!1)}._bind(this);
this.suggestOut=function(a,b){a.style||(a=d.event.srcElement?d.event.srcElement:d.event.originalTarget);this.unhighlightSuggestion(a)}._bind(this);this.highlightSuggestion=function(a){a.className="suggest_link_over"};this.unhighlightSuggestion=function(a){a.className="suggest_link"};this.highlightCurrentSuggestion=function(a){if(a)if(-1===c)this.searchBox.value=h;else{a=p[c];if(!a)return;this.hiddenInput.value=[h,a,c].join();this.searchBox.value=a}a=e.find("#issDiv"+c).get(0);this.highlightSuggestion(a)};
this.unhighlightCurrentSuggestion=function(){var a=null;try{a=e.find("#issDiv"+c).get(0)}catch(b){}a&&this.unhighlightSuggestion(a)};this.getFormattedSuggestionLine=function(a){var b=h.toLowerCase().split(" ");a=a.toLowerCase().split(" ");return f.map(a,function(a,c){return-1!==f.inArray(a,b)?"\x3cb\x3e"+a+"\x3c/b\x3e":a}).join(" ")};this.setSuggestionHideTimeout=function(){setTimeout(function(){return function(){this.HideSuggestionsDiv()}}()._bind(this),300)};this.setSearchSuggestionTimeout=function(){p=
[];this.hiddenInput.value="";q&&(clearTimeout(q),q=null);r&&(r.abort(),r=null);var a=x.split("_")[0];h.length<("zh"===a||"jp"===a?1:3)?this.HideSuggestionsDiv():q=setTimeout(function(){q=null;var a=h.toLowerCase();r=f.getJSON("/gp/help/customer/ajax/autocomplete.html",{locale:x,userQuery:a,ie:"UTF8"}).done(function(a,b){r=null;p=b;this.displaySuggestions();c=-1}._bind(this))}._bind(this),100)};this.HideSuggestionsDiv=function(){g=0;this.getSearchSuggest().innerHTML="";this.getSearchSuggest().style.display=
"none";c=-1};this.findPos=function(a){var b=0,c=0;if(a.offsetParent){do b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;while(a)}return[b,c]};this.createSuggestionDiv=function(a){var b=e.find("#helpsearch").get(0);b.offset();b.height();b=document.createElement("div");b.style.border="1px solid #5c8295";b.style.backgroundColor="white";b.style.color="black";b.style.width=a.offsetWidth;b.style.zIndex="130";b.style.display="none";b.id="help_srch_sggst";a=a.parentNode;b.style.position="absolute";u&&(a=
a.parentNode);a.appendChild(b);return b};this.getSearchSuggest=function(){v||(v=this.createSuggestionDiv(this.searchBox));return v};this.attachEventListener=function(a,b,c){var d="on"+b;if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent(d,c);else{var e=a[d];a[d]=function(){var a=e.apply(this,arguments),b=c.apply(this,arguments);return void 0===a?b:void 0===b?a:b&&a}}}}}})});